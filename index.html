<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Competitor Analysis Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>

<body>

    <div id="loading" class="loading">
        <div class="spinner"></div>
    </div>

    <div id="app-container">
        <aside class="sidebar">
            <div class="logo">‚ö° Competitor Intel</div>

            <div class="filter-group">
                <div class="filter-label">Data Source</div>
                <!-- User can paste their sheet link here if needed, or hardcode in JS -->
                <input type="text" id="sheet-url" placeholder="Paste Google Sheet CSV Link"
                    style="font-size:0.7rem; margin-bottom:0.5rem;">
                <button id="load-btn"
                    style="width:100%; padding:0.5rem; background:var(--accent-color); border:none; border-radius:4px; cursor:pointer; font-weight:600; color:#000;">Reload
                    Data</button>
            </div>

            <div class="filter-group">
                <div class="filter-label">Filter by Type</div>
                <select id="filter-type" multiple size="8" style="height: 150px;">
                    <!-- JS Populated -->
                </select>
            </div>

            <div class="filter-group">
                <div class="filter-label">Filter by Brand</div>
                <select id="filter-brand" multiple size="8" style="height: 150px;">
                    <!-- JS Populated -->
                </select>
            </div>
        </aside>

        <main class="main-content">
            <nav class="top-nav">
                <div class="nav-tabs">
                    <div class="nav-tab active" data-tab="industry">Industry Overview</div>
                    <div class="nav-tab" data-tab="brand">Brand Performance</div>
                    <div class="nav-tab" data-tab="category">Category Analysis</div>
                    <div class="nav-tab" data-tab="content">Content Insights</div>
                    <div class="nav-tab" data-tab="report">Weekly Report</div>
                </div>
            </nav>

            <div class="content-area">

                <!-- PAGE 1: INDUSTRY OVERVIEW -->
                <div id="industry" class="tab-pane active">
                    <div class="text-module" id="ceo-summary">
                        <!-- Auto-generated CEO Summary -->
                        Loading Summary...
                    </div>

                    <div class="grid-2">
                        <div class="card">
                            <div class="card-title">Interaction Volume by Type</div>
                            <div class="chart-container"><canvas id="chart-type-vol"></canvas></div>
                        </div>
                        <div class="card">
                            <div class="card-title">Top 5 Brands (Share of Voice)</div>
                            <div class="chart-container"><canvas id="chart-top5-pie"></canvas></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">Follower Growth (WoW %) - Radar Scan</div>
                        <div class="chart-container" style="height: 400px;"><canvas id="chart-radar-growth"></canvas>
                        </div>
                    </div>
                </div>

                <!-- PAGE 2: BRAND PERFORMANCE -->
                <div id="brand" class="tab-pane">
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-title">Brand Interaction (WoW Comparison)</div>
                            <div class="chart-container"><canvas id="chart-brand-wow"></canvas></div>
                        </div>
                        <div class="card">
                            <div class="card-title">Avg Engagement / Post</div>
                            <div class="chart-container"><canvas id="chart-brand-avg"></canvas></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">Detailed Brand Metrics</div>
                        <div style="overflow-x:auto;">
                            <table id="brand-table">
                                <thead>
                                    <tr>
                                        <th>Brand</th>
                                        <th>Total Posts</th>
                                        <th>Video/Image</th>
                                        <th>Total Eng.</th>
                                        <th>Eng. Rate</th>
                                        <th>WoW Eng.</th>
                                        <th>Followers</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- PAGE 3: CATEGORY ANALYSIS -->
                <div id="category" class="tab-pane">
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-title">Video Ratio by Category</div>
                            <div class="chart-container"><canvas id="chart-cat-video"></canvas></div>
                        </div>
                        <div class="card">
                            <div class="card-title">Follower Growth by Category</div>
                            <div class="chart-container"><canvas id="chart-cat-growth"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- PAGE 4: CONTENT INSIGHTS -->
                <div id="content" class="tab-pane">
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-title">Video vs Image Performance</div>
                            <div class="chart-container"><canvas id="chart-content-mix"></canvas></div>
                        </div>
                        <div class="card">
                            <div class="card-title">Content Strategy Keywords</div>
                            <div id="word-cloud"
                                style="height:300px; display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:center; padding:20px;">
                                <!-- Simple HTML Word Cloud -->
                            </div>
                        </div>
                    </div>

                    <div class="grid-2">
                        <div class="card">
                            <div class="card-title">üèÜ Top Performing Content</div>
                            <table id="top-content-table">
                                <thead>
                                    <tr>
                                        <th>Brand</th>
                                        <th>Type</th>
                                        <th>Engagement</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="card">
                            <div class="card-title">‚ö†Ô∏è Needs Improvement</div>
                            <table id="worst-content-table">
                                <thead>
                                    <tr>
                                        <th>Brand</th>
                                        <th>Type</th>
                                        <th>Engagement</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- PAGE 5: WEEKLY REPORT -->
                <div id="report" class="tab-pane">
                    <div class="report-container" id="weekly-report-text">
                        <!-- Auto Generated Report -->
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>

</html>